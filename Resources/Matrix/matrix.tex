\documentclass{article}

\usepackage[cp1251]{inputenc}
\usepackage[T2A]{fontenc}
\usepackage[russian]{babel}

\usepackage{amsmath}

\frenchspacing

\begin{document}
Начнем с небольших матриц. При подключении пакета \textbf{amsmath}, матрицы задаются с помощью окружений. Окружения так и называются: 
\texttt{matrix}, \texttt{bmatrix}, \texttt{pmatrix}, \texttt{vmatrix} и \texttt{Vmatrix}. Отлючаются они друг от друга только видом ограничивающей скобки. Внутри окружения строки матрицы друг от друга отделяются парой бэкслэшей:~\verb"\\", а элементы строк --- знаком амперсанда:~\&.
Например:
\[
\begin{pmatrix}
a_{11} & a_{12} & a_{13}\\
a_{21}&a_{22}&a_{23}\\ %можно и без пробелов!
a_{31} & a_{32} & a_{33} %после последней строки слэши ставить не надо!
%иначе в матрице будет пустая строка.
\end{pmatrix}
\]

По умолчанию количество столбцов в матрицах ограничено 10. Чтобы снять это ограничение, можно использовать команду:
\begin{center}
 \verb"\setcounter{MaxMatrixCols}{20}"
\end{center} 
где 20 --- это необходимое число столбцов.

Например, вот так выглядит треугольник паскаля в \TeX е:
\[
\setcounter{MaxMatrixCols}{20}
\begin{matrix}
&&&& 1 && 1\\
&&& 1 && 2 && 1\\
&& 1 && 3 && 3 && 1\\
& 1 && 4 && 6 && 4 && 1\\
1 && 5 && 10 && 10 && 5 && 1
\end{matrix}
\]

Часто в матрицах используют различные многоточия, чтобы <<пропускать>> элементы.
Для вывода этих многоточний используются команды \verb"\ldots", \verb"\vdots" и \verb"\ddots":
\[
\begin{pmatrix}
a_{11} & a_{12} & \ldots & a_{1n}\\
a_{21} & a_{22} & \ldots & a_{2n}\\
\vdots & \vdots & \ddots & \vdots\\
a_{n1} & a_{n2} & \ldots & a_{nn}
\end{pmatrix}
\]

Иногда требуется поставить более чем 3 точки. Для этого (для строк) используется команда \verb"\hdotsfor[...]{...}". Необязательный аргумент этой команды (в квадратных скобках) обозначает разреженность точек и указывается в виде десятичной дроби, а обязательный --- количество \emph{столбцов}.
Например:
\[
\begin{vmatrix}
0 & 0 & \hdotsfor{2} &a_1\\
1 & 0 & \hdotsfor{2} &a_2\\
\hdotsfor[2.5]{5}\\
\hdotsfor{2} & 1 & 0 & a_{n-1}\\
0 & \hdotsfor{2} & 1 & a_n
\end{vmatrix}
\]

Есть еще окружение \verb"smallmatrix". От обычной матрицы оно отличается уменьшенными размерами элементов (поэтому обычно используется для включаемых формул). Например, вот так: $\mathbf X = \bigl(\begin{smallmatrix} 1 & -1\\ 0&1 \end{smallmatrix}\bigr)$.

\bigskip

Одними матрицами возможности пакета \mbox{\textbf{amsmath}} не ограничиваются. Рассмотрим команды этого пакета, предназначенные для работы с дробями. Дело в том, что команда \verb"\frac" может самовольно сильно уменьшать шрифты в формулах, если они встречаются, например, во включенных формулах: $\frac45$ или в индексах. Чтобы справиться с этим недоразумением, в пакете \mbox{\textbf{amsmath}} предусмотрены команды \verb"\dfrac" (для включаемых форумул) и \verb"\tfrac" (для индексов). Сравните:
$\frac23$~и~$\dfrac23$.
\[
 2^{\frac xy} \mbox{ и } 2^{\tfrac xy}.
\]
Еще один вариант этой команды, \verb"\cfrac", используются для так называемых <<цепных дробей>>:
\[
 \frac{7}{25}=\cfrac{1}{3+\cfrac{1}{1+\cfrac{1}{1+\cfrac{1}{3}}}}
\]
У этой команды есть необязательные аргументы, которые отвечают за центрирование числителей дроби. Вот так: \verb"\cfrac[l]{...}" или \verb"\cfrac[r]{...}". Например, вот так эта формула выглядит забавнее:
\[
 \frac{7}{25}=\cfrac[r]{1}{3+\cfrac[r]{1}{1+\cfrac[r]{1}{1+\cfrac[r]{1}{3}}}}
\]

Также пакет \textbf{amsmath} позволяет задавать несколько индексов один под другим. Для этого используется команда substack. Вот так, например:
$$
\sum_{\substack{
  i\in[0;n]\\
  j\in[0;m]}} a_{ij}
$$

Еще одна полезная команда пакета --- стрелка с надписью: $A\xrightarrow{f}B$.

Также в этот пакет входят значки для двойных и тройных интегралов (в стандартном \TeX е их нет): $\iint ~~ \iiint$

\bigskip

Пакет \mbox{\textbf{amsmath}} включает в себя и средства создания многострочных формул. Для этого предназначены окружения \texttt{miltline}, \texttt{gather}, \texttt{align}, \texttt{aligned} и \texttt{cases}. Каждая используется для своего случая.
Общая их особенность заключается в том, что внутри них нельзя оформлять формулы с помощью знаков \$. Кроме того, за исключением окружений \texttt{cases} и \texttt{aligned}, эти окружения сами по себе являются указанием на то, что их содержимое является формулами; то есть заключать их в \verb"$$...$$", \verb"\[...\]" или окружение \texttt{equation} НЕ НУЖНО.

\medskip

Итак, окружение \texttt{miltiline} предназначено для разбиения формул на части:
\begin{multline}
1+2+3+4+5+\ldots\\
+50+51+52+\ldots\\
+98+99+100=5050
\end{multline}

Окружение \texttt{gather} полезно, когда подряд идут несколько формул (если каждую заключать в <<доллары>> (или в \verb"\[...\]", равно как и в окружение \texttt{equation*}), между ними будут слишком большие отступы).
\begin{gather}
  2\times 2=4\\
  2\times 3=6\\
  2\times 4=8\\
  2\times 5=10
\end{gather}

Окружение \texttt{align} используется, когда нужно писать формулы в столбцы. При этом символы, по которым ведется выравнивание, отмечаются амперсандами (\& ставится \emph{перед} символом; и обычно этим символом является знак равенства):
\begin{align}
  2^2&=4   &  2^6&=64\\
  2^3&=8   &  2^7&=128\\
%в это окружение можно вставлять и текст МЕЖДУ строками.
%Для этого используется команда intertext{}
%\intertext{Чего бы такого здесь написать?}
  2^4&=16   &  2^8&=256\\
  2^5&=32
\end{align}

<<Младший брат>> этого окружения --- окружение \texttt{aligned}, которое используется, когда нужно обеспечить выравнивание \emph{внутри} другой формулы, например, при задании системы уравнений:
\[
\left\{
  \begin{aligned}
    5x+7y&=11\\
    -2x+12y&=5
  \end{aligned}
\right.
\]

Наконец, окружение \texttt{cases} используется при указании значений с условиями:
\[
|x|=\begin{cases}
x,&\text{если $x>0$;}\\
0,&\text{если $x=0$;}\\
-x,&\text{если $x<0$.}
\end{cases}
\]

Во всех этих окружениях формулы автоматически нумеруются. Чтобы не нумеровать ВСЕ формулы, используется вариант команды <<со звездочкой>>; чтобы запретить нумерацию отдельной формулы, после нее нужно указывать команду \verb"\notag".

\end{document} 